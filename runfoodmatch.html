<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥åº·è¨˜éŒ² - Running & Meal Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
    }

    .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
    }

    .header {
        text-align: center;
        margin-bottom: 40px;
        color: white;
    }

    .header h1 {
        font-size: 3rem;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .header p {
        font-size: 1.2rem;
        opacity: 0.9;
    }

    .tabs {
        display: flex;
        justify-content: center;
        margin-bottom: 30px;
        gap: 10px;
    }

    .tab-btn {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
        padding: 12px 30px;
        border-radius: 25px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .tab-btn.active {
        background: rgba(255, 255, 255, 0.9);
        color: #667eea;
        border-color: rgba(255, 255, 255, 0.9);
    }

    .tab-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
    }

    .main-content {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 30px;
        margin-bottom: 40px;
    }

    .card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        backdrop-filter: blur(10px);
    }

    .form-section h2 {
        color: #4a5568;
        margin-bottom: 20px;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #2d3748;
    }

    .form-group input, .form-group select, .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s ease;
        font-family: inherit;
    }

    .form-group textarea {
        resize: vertical;
        min-height: 80px;
    }

    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
    }

    .btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        width: 100%;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }

    .btn.meal-btn {
        background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
    }

    .btn.meal-btn:hover {
        box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
    }

    .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .stat-card.meal-stat {
        background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
    }

    .stat-card h3 {
        font-size: 2rem;
        margin-bottom: 5px;
    }

    .stat-card p {
        opacity: 0.9;
        font-size: 0.9rem;
    }

    .records-section h2 {
        color: #4a5568;
        margin-bottom: 20px;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .record-item {
        background: #f7fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.2s ease;
    }

    .record-item:hover {
        background: #edf2f7;
        border-color: #cbd5e0;
        transform: translateX(5px);
    }

    .record-item.meal-record {
        border-left: 4px solid #ff6b6b;
    }

    .record-info {
        flex: 1;
    }

    .record-date {
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 5px;
    }

    .record-details {
        color: #718096;
        font-size: 0.9rem;
    }

    .record-badge {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .record-badge.meal-badge {
        background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
    }

    .delete-btn {
        background: #e53e3e;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.8rem;
        margin-left: 10px;
        transition: background-color 0.2s ease;
    }

    .delete-btn:hover {
        background: #c53030;
    }

    .empty-state {
        text-align: center;
        color: #718096;
        padding: 40px;
        font-style: italic;
    }

    .matching-card {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 15px;
        border-left: 5px solid #667eea;
        transition: all 0.3s ease;
    }

    .matching-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .user-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .user-name {
        font-size: 1.2rem;
        font-weight: bold;
        color: #2d3748;
    }

    .user-badges {
        display: flex;
        gap: 8px;
    }

    .user-badge {
        background: rgba(102, 126, 234, 0.2);
        color: #667eea;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
    }

    .user-details {
        color: #4a5568;
        margin-bottom: 10px;
    }

    .match-score {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: 600;
        display: inline-block;
    }

    .contact-btn {
        background: #48bb78;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: background-color 0.2s ease;
        margin-left: 10px;
    }

    .contact-btn:hover {
        background: #38a169;
    }

    .event-card {
        background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 15px;
        border-left: 5px solid #ff6b6b;
        transition: all 0.3s ease;
    }

    .event-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .event-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .event-title {
        font-size: 1.3rem;
        font-weight: bold;
        color: #2d3748;
    }

    .event-date {
        background: #ff6b6b;
        color: white;
        padding: 5px 12px;
        border-radius: 12px;
        font-size: 0.9rem;
        font-weight: 600;
    }

    .event-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
        margin-bottom: 15px;
    }

    .event-detail {
        background: rgba(255, 255, 255, 0.7);
        padding: 8px 12px;
        border-radius: 8px;
        text-align: center;
        font-size: 0.9rem;
    }

    .event-detail strong {
        display: block;
        color: #2d3748;
        margin-bottom: 2px;
    }

    .event-actions {
        display: flex;
        gap: 10px;
    }

    .register-btn {
        background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease;
    }

    .register-btn:hover {
        transform: translateY(-2px);
    }

    .info-btn {
        background: #e2e8f0;
        color: #4a5568;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.2s ease;
    }

    .info-btn:hover {
        background: #cbd5e0;
    }

    .event-filters {
        margin-bottom: 20px;
    }
        display: inline-block;
        padding: 3px 8px;
        border-radius: 10px;
        font-size: 0.7rem;
        font-weight: 600;
        margin-right: 8px;
    }

    .breakfast { background: #ffd93d; color: #7c2d12; }
    .lunch { background: #34d399; color: #065f46; }
    .dinner { background: #f472b6; color: #831843; }
    .snack { background: #a78bfa; color: #3730a3; }

    @media (max-width: 768px) {
        .main-content {
            grid-template-columns: 1fr;
        }
        
        .header h1 {
            font-size: 2rem;
        }
        
        .stats {
            grid-template-columns: repeat(2, 1fr);
        }

        .tabs {
            flex-direction: column;
            align-items: center;
        }

        .form-row {
            grid-template-columns: 1fr;
        }
    }

    .fade-in {
        animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸƒâ€â™‚ï¸ğŸ½ï¸ å¥åº·è¨˜éŒ²</h1>
            <p>ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã¨é£Ÿäº‹ã§å¥åº·çš„ãªãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã‚’</p>
        </div>

```
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('running')">ğŸƒâ€â™‚ï¸ ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°</button>
        <button class="tab-btn" onclick="switchTab('matching')">ğŸ‘¥ ãƒãƒƒãƒãƒ³ã‚°</button>
        <button class="tab-btn" onclick="switchTab('events')">ğŸ† å¤§ä¼šæƒ…å ±</button>
        <button class="tab-btn" onclick="switchTab('meal')">ğŸ½ï¸ é£Ÿäº‹è¨˜éŒ²</button>
    </div>

    <!-- ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚¿ãƒ– -->
    <div id="running-tab" class="tab-content active">
        <div class="main-content">
            <div class="card form-section">
                <h2>ğŸƒâ€â™‚ï¸ æ–°ã—ã„è¨˜éŒ²ã‚’è¿½åŠ </h2>
                <form id="runningForm">
                    <div class="form-group">
                        <label for="run-date">æ—¥ä»˜</label>
                        <input type="date" id="run-date" required>
                    </div>
                    <div class="form-group">
                        <label for="distance">è·é›¢ (km)</label>
                        <input type="number" id="distance" step="0.1" min="0" placeholder="5.0" required>
                    </div>
                    <div class="form-group">
                        <label for="time">æ™‚é–“ (åˆ†)</label>
                        <input type="number" id="time" min="1" placeholder="30" required>
                    </div>
                    <div class="form-group">
                        <label for="run-notes">ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰</label>
                        <input type="text" id="run-notes" placeholder="ä»Šæ—¥ã®èª¿å­ã‚„æ„Ÿæƒ³ãªã©...">
                    </div>
                    <button type="submit" class="btn">è¨˜éŒ²ã‚’è¿½åŠ </button>
                </form>
            </div>

            <div class="card">
                <div class="stats">
                    <div class="stat-card">
                        <h3 id="totalRuns">0</h3>
                        <p>ç·å›æ•°</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="totalDistance">0.0</h3>
                        <p>ç·è·é›¢ (km)</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="avgPace">-</h3>
                        <p>å¹³å‡ãƒšãƒ¼ã‚¹</p>
                    </div>
                </div>

                <div class="records-section">
                    <h2>ğŸƒâ€â™‚ï¸ ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°è¨˜éŒ²</h2>
                    <div id="runningRecordsList">
                        <div class="empty-state">
                            ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>
                            æœ€åˆã®è¨˜éŒ²ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ãƒãƒƒãƒãƒ³ã‚°ã‚¿ãƒ– -->
    <div id="matching-tab" class="tab-content">
        <div class="main-content">
            <div class="card form-section">
                <h2>ğŸ‘¥ ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ä»²é–“ã‚’è¦‹ã¤ã‘ã‚ˆã†</h2>
                <form id="matchingForm">
                    <div class="form-group">
                        <label for="user-name">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </label>
                        <input type="text" id="user-name" placeholder="ä¾‹: ãƒ©ãƒ³ãƒŠãƒ¼å¤ªéƒ" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="user-age">å¹´ä»£</label>
                            <select id="user-age" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="20s">20ä»£</option>
                                <option value="30s">30ä»£</option>
                                <option value="40s">40ä»£</option>
                                <option value="50s">50ä»£</option>
                                <option value="60s">60ä»£ä»¥ä¸Š</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="user-level">ãƒ¬ãƒ™ãƒ«</label>
                            <select id="user-level" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="beginner">åˆå¿ƒè€…</option>
                                <option value="intermediate">ä¸­ç´šè€…</option>
                                <option value="advanced">ä¸Šç´šè€…</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="user-pace">ç›®æ¨™ãƒšãƒ¼ã‚¹ (åˆ†/km)</label>
                            <input type="text" id="user-pace" placeholder="ä¾‹: 5:30" required>
                        </div>
                        <div class="form-group">
                            <label for="user-area">ã‚¨ãƒªã‚¢</label>
                            <input type="text" id="user-area" placeholder="ä¾‹: æ±äº¬éƒ½æ¸‹è°·åŒº" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="user-goals">ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ç›®æ¨™</label>
                        <textarea id="user-goals" placeholder="ä¾‹: ãƒ•ãƒ«ãƒãƒ©ã‚½ãƒ³å®Œèµ°ã€å¥åº·ç¶­æŒã€ãƒ€ã‚¤ã‚¨ãƒƒãƒˆãªã©"></textarea>
                    </div>
                    <button type="submit" class="btn">ãƒãƒƒãƒãƒ³ã‚°é–‹å§‹</button>
                </form>
            </div>

            <div class="card">
                <div class="records-section">
                    <h2>ğŸ‘¥ ãƒãƒƒãƒãƒ³ã‚°çµæœ</h2>
                    <div id="matchingResults">
                        <div class="empty-state">
                            ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç™»éŒ²ã—ã¦ãƒãƒƒãƒãƒ³ã‚°ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ï¼
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¤§ä¼šæƒ…å ±ã‚¿ãƒ– -->
    <div id="events-tab" class="tab-content">
        <div class="main-content">
            <div class="card form-section">
                <h2>ğŸ† ãŠã™ã™ã‚ãƒãƒ©ã‚½ãƒ³å¤§ä¼š</h2>
                <div class="event-filters">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="event-distance">è·é›¢</label>
                            <select id="event-distance" onchange="filterEvents()">
                                <option value="all">ã™ã¹ã¦</option>
                                <option value="5k">5K</option>
                                <option value="10k">10K</option>
                                <option value="half">ãƒãƒ¼ãƒ•ãƒãƒ©ã‚½ãƒ³</option>
                                <option value="full">ãƒ•ãƒ«ãƒãƒ©ã‚½ãƒ³</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="event-region">åœ°åŸŸ</label>
                            <select id="event-region" onchange="filterEvents()">
                                <option value="all">ã™ã¹ã¦</option>
                                <option value="kanto">é–¢æ±</option>
                                <option value="kansai">é–¢è¥¿</option>
                                <option value="chubu">ä¸­éƒ¨</option>
                                <option value="other">ãã®ä»–</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="records-section">
                    <h2>ğŸ† å¤§ä¼šä¸€è¦§</h2>
                    <div id="eventsList">
                        <!-- å¤§ä¼šæƒ…å ±ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="meal-tab" class="tab-content">
        <div class="main-content">
            <div class="card form-section">
                <h2>ğŸ½ï¸ æ–°ã—ã„é£Ÿäº‹è¨˜éŒ²ã‚’è¿½åŠ </h2>
                <form id="mealForm">
                    <div class="form-group">
                        <label for="meal-date">æ—¥ä»˜</label>
                        <input type="date" id="meal-date" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="meal-type">é£Ÿäº‹ã®ç¨®é¡</label>
                            <select id="meal-type" required>
                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="breakfast">æœé£Ÿ</option>
                                <option value="lunch">æ˜¼é£Ÿ</option>
                                <option value="dinner">å¤•é£Ÿ</option>
                                <option value="snack">é–“é£Ÿ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="calories">ã‚«ãƒ­ãƒªãƒ¼ï¼ˆä»»æ„ï¼‰</label>
                            <input type="number" id="calories" min="0" placeholder="500">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="meal-name">æ–™ç†å</label>
                        <input type="text" id="meal-name" placeholder="ä¾‹: ãƒã‚­ãƒ³ã‚µãƒ©ãƒ€" required>
                    </div>
                    <div class="form-group">
                        <label for="meal-notes">ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰</label>
                        <textarea id="meal-notes" placeholder="ææ–™ã€æ„Ÿæƒ³ã€æ „é¤Šãƒãƒ©ãƒ³ã‚¹ãªã©..."></textarea>
                    </div>
                    <button type="submit" class="btn meal-btn">è¨˜éŒ²ã‚’è¿½åŠ </button>
                </form>
            </div>

            <div class="card">
                <div class="stats">
                    <div class="stat-card meal-stat">
                        <h3 id="totalMeals">0</h3>
                        <p>ç·é£Ÿäº‹æ•°</p>
                    </div>
                    <div class="stat-card meal-stat">
                        <h3 id="avgCalories">-</h3>
                        <p>å¹³å‡ã‚«ãƒ­ãƒªãƒ¼</p>
                    </div>
                    <div class="stat-card meal-stat">
                        <h3 id="todayMeals">0</h3>
                        <p>ä»Šæ—¥ã®é£Ÿäº‹æ•°</p>
                    </div>
                </div>

                <div class="records-section">
                    <h2>ğŸ½ï¸ é£Ÿäº‹è¨˜éŒ²</h2>
                    <div id="mealRecordsList">
                        <div class="empty-state">
                            ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>
                            æœ€åˆã®é£Ÿäº‹è¨˜éŒ²ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    class HealthTracker {
        constructor() {
            this.runningRecords = this.loadRecords('runningRecords');
            this.mealRecords = this.loadRecords('mealRecords');
            this.userProfile = this.loadRecords('userProfile');
            this.marathonEvents = this.getMarathonEvents();
            this.init();
        }

        init() {
            // ä»Šæ—¥ã®æ—¥ä»˜ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¨­å®š
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('run-date').value = today;
            document.getElementById('meal-date').value = today;
            
            // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ
            document.getElementById('runningForm').addEventListener('submit', (e) => {
                e.preventDefault();
                this.addRunningRecord();
            });

            document.getElementById('mealForm').addEventListener('submit', (e) => {
                e.preventDefault();
                this.addMealRecord();
            });

            document.getElementById('matchingForm').addEventListener('submit', (e) => {
                e.preventDefault();
                this.saveUserProfile();
            });

            this.updateDisplay();
            this.displayMarathonEvents();
        }

        getMarathonEvents() {
            return [
                {
                    id: 1,
                    title: "æ±äº¬ãƒãƒ©ã‚½ãƒ³2025",
                    date: "2025-03-02",
                    location: "æ±äº¬éƒ½",
                    distance: "full",
                    region: "kanto",
                    entryFee: "16,200å††",
                    participants: "38,000äºº",
                    description: "æ—¥æœ¬æœ€å¤§ç´šã®ãƒãƒ©ã‚½ãƒ³å¤§ä¼šï¼æ±äº¬ã®åæ‰€ã‚’é§†ã‘æŠœã‘ã‚ˆã†"
                },
                {
                    id: 2,
                    title: "å¤§é˜ªãƒãƒ©ã‚½ãƒ³2025",
                    date: "2025-02-23",
                    location: "å¤§é˜ªåºœ",
                    distance: "full",
                    region: "kansai",
                    entryFee: "14,000å††",
                    participants: "32,000äºº",
                    description: "é–¢è¥¿æœ€å¤§ã®ãƒãƒ©ã‚½ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ"
                },
                {
                    id: 3,
                    title: "çš‡å±…ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°å¤§ä¼š",
                    date: "2025-08-15",
                    location: "æ±äº¬éƒ½åƒä»£ç”°åŒº",
                    distance: "10k",
                    region: "kanto",
                    entryFee: "3,500å††",
                    participants: "1,500äºº",
                    description: "çš‡å±…å‘¨è¾ºã‚’èµ°ã‚‹äººæ°—ã®10Kå¤§ä¼š"
                },
                {
                    id: 4,
                    title: "å¯Œå£«å±±ãƒãƒ©ã‚½ãƒ³",
                    date: "2025-04-20",
                    location: "å±±æ¢¨çœŒ",
                    distance: "half",
                    region: "chubu",
                    entryFee: "8,000å††",
                    participants: "12,000äºº",
                    description: "å¯Œå£«å±±ã‚’æœ›ã‚€çµ¶æ™¯ãƒãƒ¼ãƒ•ãƒãƒ©ã‚½ãƒ³"
                },
                {
                    id: 5,
                    title: "æ¨ªæµœãƒãƒ©ã‚½ãƒ³2025",
                    date: "2025-10-26",
                    location: "ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚",
                    distance: "full",
                    region: "kanto",
                    entryFee: "15,000å††",
                    participants: "28,000äºº",
                    description: "ã¿ãªã¨ã¿ã‚‰ã„ã‚’é§†ã‘æŠœã‘ã‚‹éƒ½å¸‚å‹ãƒãƒ©ã‚½ãƒ³"
                },
                {
                    id: 6,
                    title: "åˆå¿ƒè€…å‘ã‘5Kãƒ•ã‚¡ãƒ³ãƒ©ãƒ³",
                    date: "2025-09-12",
                    location: "æ±äº¬éƒ½æ±Ÿæ±åŒº",
                    distance: "5k",
                    region: "kanto",
                    entryFee: "2,000å††",
                    participants: "800äºº",
                    description: "åˆå¿ƒè€…æ­“è¿ï¼æ¥½ã—ãèµ°ã‚‹5Kå¤§ä¼š"
                }
            ];
        }

        getMatchingUsers() {
            return [
                {
                    id: 1,
                    name: "ãƒ©ãƒ³ãƒŠãƒ¼èŠ±å­",
                    age: "30ä»£",
                    level: "ä¸­ç´šè€…",
                    pace: "5:20",
                    area: "æ±äº¬éƒ½æ–°å®¿åŒº",
                    goals: "ã‚µãƒ–4é”æˆã€å¥åº·ç¶­æŒ",
                    matchScore: 95
                },
                {
                    id: 2,
                    name: "ãƒãƒ©ã‚½ãƒ³å¤ªéƒ",
                    age: "40ä»£",
                    level: "ä¸Šç´šè€…",
                    pace: "4:30",
                    area: "æ±äº¬éƒ½ä¸–ç”°è°·åŒº",
                    goals: "ã‚µãƒ–3.5ã€å¤§ä¼šå‡ºå ´",
                    matchScore: 88
                },
                {
                    id: 3,
                    name: "ã‚¸ãƒ§ã‚®ãƒ³ã‚°æ¬¡éƒ",
                    age: "20ä»£",
                    level: "åˆå¿ƒè€…",
                    pace: "6:30",
                    area: "æ±äº¬éƒ½æ¸‹è°·åŒº",
                    goals: "ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã€ä½“åŠ›å‘ä¸Š",
                    matchScore: 82
                },
                {
                    id: 4,
                    name: "å¥åº·ãƒ©ãƒ³ãƒŠãƒ¼",
                    age: "50ä»£",
                    level: "ä¸­ç´šè€…",
                    pace: "5:45",
                    area: "æ±äº¬éƒ½æ‰ä¸¦åŒº",
                    goals: "å¥åº·ç¶­æŒã€ã‚¹ãƒˆãƒ¬ã‚¹è§£æ¶ˆ",
                    matchScore: 79
                }
            ];
        }

        saveUserProfile() {
            const profile = {
                name: document.getElementById('user-name').value,
                age: document.getElementById('user-age').value,
                level: document.getElementById('user-level').value,
                pace: document.getElementById('user-pace').value,
                area: document.getElementById('user-area').value,
                goals: document.getElementById('user-goals').value
            };

            this.userProfile = profile;
            this.saveRecords('userProfile', profile);
            this.updateMatchingResults();
            this.showNotification('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒä¿å­˜ã•ã‚Œã€ãƒãƒƒãƒãƒ³ã‚°ã‚’é–‹å§‹ã—ã¾ã—ãŸï¼');
        }

        updateMatchingResults() {
            const container = document.getElementById('matchingResults');
            const users = this.getMatchingUsers();

            if (!this.userProfile.name) {
                container.innerHTML = `
                    <div class="empty-state">
                        ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç™»éŒ²ã—ã¦ãƒãƒƒãƒãƒ³ã‚°ã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ï¼
                    </div>
                `;
                return;
            }

            container.innerHTML = users.map(user => `
                <div class="matching-card fade-in">
                    <div class="user-info">
                        <div class="user-name">${user.name}</div>
                        <div class="user-badges">
                            <span class="user-badge">${user.age}</span>
                            <span class="user-badge">${user.level}</span>
                        </div>
                    </div>
                    <div class="user-details">
                        ğŸ“ ${user.area} â€¢ ğŸƒâ€â™‚ï¸ ${user.pace}/km<br>
                        ğŸ¯ ${user.goals}
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span class="match-score">ãƒãƒƒãƒåº¦: ${user.matchScore}%</span>
                        <button class="contact-btn" onclick="tracker.contactUser(${user.id})">é€£çµ¡ã™ã‚‹</button>
                    </div>
                </div>
            `).join('');
        }

        displayMarathonEvents() {
            const container = document.getElementById('eventsList');
            
            container.innerHTML = this.marathonEvents.map(event => `
                <div class="event-card fade-in" data-distance="${event.distance}" data-region="${event.region}">
                    <div class="event-header">
                        <div class="event-title">${event.title}</div>
                        <div class="event-date">${this.formatEventDate(event.date)}</div>
                    </div>
                    <div class="event-info">
                        <div class="event-detail">
                            <strong>ğŸ“ é–‹å‚¬åœ°</strong>
                            ${event.location}
                        </div>
                        <div class="event-detail">
                            <strong>ğŸƒâ€â™‚ï¸ è·é›¢</strong>
                            ${this.getDistanceText(event.distance)}
                        </div>
                        <div class="event-detail">
                            <strong>ğŸ’° å‚åŠ è²»</strong>
                            ${event.entryFee}
                        </div>
                        <div class="event-detail">
                            <strong>ğŸ‘¥ å®šå“¡</strong>
                            ${event.participants}
                        </div>
                    </div>
                    <p style="margin-bottom: 15px; color: #4a5568;">${event.description}</p>
                    <div class="event-actions">
                        <button class="register-btn" onclick="tracker.registerEvent(${event.id})">ã‚¨ãƒ³ãƒˆãƒªãƒ¼</button>
                        <button class="info-btn" onclick="tracker.showEventInfo(${event.id})">è©³ç´°æƒ…å ±</button>
                    </div>
                </div>
            `).join('');
        }

        getDistanceText(distance) {
            const distances = {
                '5k': '5K',
                '10k': '10K',
                'half': 'ãƒãƒ¼ãƒ•ãƒãƒ©ã‚½ãƒ³',
                'full': 'ãƒ•ãƒ«ãƒãƒ©ã‚½ãƒ³'
            };
            return distances[distance] || distance;
        }

        formatEventDate(dateString) {
            const date = new Date(dateString);
            return `${date.getMonth() + 1}/${date.getDate()}`;
        }

        contactUser(userId) {
            this.showNotification(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€£çµ¡æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™ã€‚ID: ${userId}`);
        }

        registerEvent(eventId) {
            const event = this.marathonEvents.find(e => e.id === eventId);
            this.showNotification(`${event.title}ã¸ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç”»é¢ã«ç§»å‹•ã—ã¾ã™ï¼ˆé–‹ç™ºä¸­ï¼‰`);
        }

        showEventInfo(eventId) {
            const event = this.marathonEvents.find(e => e.id === eventId);
            alert(`${event.title}\n\nğŸ“… é–‹å‚¬æ—¥: ${event.date}\nğŸ“ å ´æ‰€: ${event.location}\nğŸ’° å‚åŠ è²»: ${event.entryFee}\nğŸ‘¥ å®šå“¡: ${event.participants}\n\n${event.description}`);
        }

        loadRecords(key) {
            const saved = JSON.parse(localStorage.getItem(key) || '[]');
            return saved.sort((a, b) => new Date(b.date) - new Date(a.date));
        }

        saveRecords(key, records) {
            localStorage.setItem(key, JSON.stringify(records));
        }

        addRunningRecord() {
            const date = document.getElementById('run-date').value;
            const distance = parseFloat(document.getElementById('distance').value);
            const time = parseInt(document.getElementById('time').value);
            const notes = document.getElementById('run-notes').value;

            if (!date || !distance || !time) {
                alert('æ—¥ä»˜ã€è·é›¢ã€æ™‚é–“ã¯å¿…é ˆé …ç›®ã§ã™ã€‚');
                return;
            }

            const pace = this.calculatePace(distance, time);
            const record = {
                id: Date.now(),
                type: 'running',
                date,
                distance,
                time,
                notes,
                pace
            };

            this.runningRecords.unshift(record);
            this.saveRecords('runningRecords', this.runningRecords);
            this.updateDisplay();
            this.clearRunningForm();
            this.showNotification('ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°è¨˜éŒ²ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼');
        }

        addMealRecord() {
            const date = document.getElementById('meal-date').value;
            const mealType = document.getElementById('meal-type').value;
            const mealName = document.getElementById('meal-name').value;
            const calories = document.getElementById('calories').value;
            const notes = document.getElementById('meal-notes').value;

            if (!date || !mealType || !mealName) {
                alert('æ—¥ä»˜ã€é£Ÿäº‹ã®ç¨®é¡ã€æ–™ç†åã¯å¿…é ˆé …ç›®ã§ã™ã€‚');
                return;
            }

            const record = {
                id: Date.now(),
                type: 'meal',
                date,
                mealType,
                mealName,
                calories: calories ? parseInt(calories) : null,
                notes
            };

            this.mealRecords.unshift(record);
            this.saveRecords('mealRecords', this.mealRecords);
            this.updateDisplay();
            this.clearMealForm();
            this.showNotification('é£Ÿäº‹è¨˜éŒ²ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼');
        }

        calculatePace(distance, time) {
            const paceMinutes = time / distance;
            const minutes = Math.floor(paceMinutes);
            const seconds = Math.round((paceMinutes - minutes) * 60);
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        deleteRecord(id, type) {
            if (confirm('ã“ã®è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                if (type === 'running') {
                    this.runningRecords = this.runningRecords.filter(record => record.id !== id);
                    this.saveRecords('runningRecords', this.runningRecords);
                } else {
                    this.mealRecords = this.mealRecords.filter(record => record.id !== id);
                    this.saveRecords('mealRecords', this.mealRecords);
                }
                this.updateDisplay();
                this.showNotification('è¨˜éŒ²ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚');
            }
        }

        updateDisplay() {
            this.updateRunningStats();
            this.updateMealStats();
            this.updateRunningRecordsList();
            this.updateMealRecordsList();
        }

        updateRunningStats() {
            const totalRuns = this.runningRecords.length;
            const totalDistance = this.runningRecords.reduce((sum, record) => sum + record.distance, 0);
            const avgPace = totalRuns > 0 ? this.calculateAveragePace() : '-';

            document.getElementById('totalRuns').textContent = totalRuns;
            document.getElementById('totalDistance').textContent = totalDistance.toFixed(1);
            document.getElementById('avgPace').textContent = avgPace;
        }

        updateMealStats() {
            const totalMeals = this.mealRecords.length;
            const calorieRecords = this.mealRecords.filter(record => record.calories);
            const avgCalories = calorieRecords.length > 0 ? 
                Math.round(calorieRecords.reduce((sum, record) => sum + record.calories, 0) / calorieRecords.length) : '-';
            
            const today = new Date().toISOString().split('T')[0];
            const todayMeals = this.mealRecords.filter(record => record.date === today).length;

            document.getElementById('totalMeals').textContent = totalMeals;
            document.getElementById('avgCalories').textContent = avgCalories === '-' ? '-' : avgCalories + 'kcal';
            document.getElementById('todayMeals').textContent = todayMeals;
        }

        calculateAveragePace() {
            const totalTime = this.runningRecords.reduce((sum, record) => sum + record.time, 0);
            const totalDistance = this.runningRecords.reduce((sum, record) => sum + record.distance, 0);
            
            if (totalDistance === 0) return '-';
            
            const avgPaceMinutes = totalTime / totalDistance;
            const minutes = Math.floor(avgPaceMinutes);
            const seconds = Math.round((avgPaceMinutes - minutes) * 60);
            return `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        updateRunningRecordsList() {
            const container = document.getElementById('runningRecordsList');
            
            if (this.runningRecords.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>
                        æœ€åˆã®è¨˜éŒ²ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼
                    </div>
                `;
                return;
            }

            container.innerHTML = this.runningRecords.map(record => `
                <div class="record-item fade-in">
                    <div class="record-info">
                        <div class="record-date">${this.formatDate(record.date)}</div>
                        <div class="record-details">
                            ${record.distance}km â€¢ ${record.time}åˆ†
                            ${record.notes ? ` â€¢ ${record.notes}` : ''}
                        </div>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="record-badge">${record.pace}/km</div>
                        <button class="delete-btn" onclick="tracker.deleteRecord(${record.id}, 'running')">å‰Šé™¤</button>
                    </div>
                </div>
            `).join('');
        }

        updateMealRecordsList() {
            const container = document.getElementById('mealRecordsList');
            
            if (this.mealRecords.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>
                        æœ€åˆã®é£Ÿäº‹è¨˜éŒ²ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼
                    </div>
                `;
                return;
            }

            container.innerHTML = this.mealRecords.map(record => `
                <div class="record-item meal-record fade-in">
                    <div class="record-info">
                        <div class="record-date">${this.formatDate(record.date)}</div>
                        <div class="record-details">
                            <span class="meal-type-badge ${record.mealType}">${this.getMealTypeText(record.mealType)}</span>
                            ${record.mealName}
                            ${record.calories ? ` â€¢ ${record.calories}kcal` : ''}
                            ${record.notes ? ` â€¢ ${record.notes}` : ''}
                        </div>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="record-badge meal-badge">ğŸ½ï¸</div>
                        <button class="delete-btn" onclick="tracker.deleteRecord(${record.id}, 'meal')">å‰Šé™¤</button>
                    </div>
                </div>
            `).join('');
        }

        getMealTypeText(type) {
            const types = {
                breakfast: 'æœé£Ÿ',
                lunch: 'æ˜¼é£Ÿ',
                dinner: 'å¤•é£Ÿ',
                snack: 'é–“é£Ÿ'
            };
            return types[type] || type;
        }

        formatDate(dateString) {
            const date = new Date(dateString);
            const today = new Date();
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);

            if (date.toDateString() === today.toDateString()) {
                return 'ä»Šæ—¥';
            } else if (date.toDateString() === yesterday.toDateString()) {
                return 'æ˜¨æ—¥';
            } else {
                return `${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;
            }
        }

        clearRunningForm() {
            document.getElementById('distance').value = '';
            document.getElementById('time').value = '';
            document.getElementById('run-notes').value = '';
        }

        clearMealForm() {
            document.getElementById('meal-type').value = '';
            document.getElementById('meal-name').value = '';
            document.getElementById('calories').value = '';
            document.getElementById('meal-notes').value = '';
        }

        showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #48bb78;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    }

    function switchTab(tabName) {
        // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®æ›´æ–°
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        // ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ›´æ–°
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        document.getElementById(tabName + '-tab').classList.add('active');
    }

    function filterEvents() {
        const distanceFilter = document.getElementById('event-distance').value;
        const regionFilter = document.getElementById('event-region').value;
        const eventCards = document.querySelectorAll('.event-card');

        eventCards.forEach(card => {
            const eventDistance = card.getAttribute('data-distance');
            const eventRegion = card.getAttribute('data-region');

            const distanceMatch = distanceFilter === 'all' || eventDistance === distanceFilter;
            const regionMatch = regionFilter === 'all' || eventRegion === regionFilter;

            if (distanceMatch && regionMatch) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }

    // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
    const tracker = new HealthTracker();
</script>
```

</body>
</html>
